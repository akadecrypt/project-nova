{
  "tools": [
    {
      "name": "execute_sql",
      "description": "PRIMARY TOOL FOR ALL READ OPERATIONS. Execute SQL queries on the analytics database to list buckets, get stats, analyze trends, view storage data. Use this for ANY request that asks to 'list', 'show', 'get', 'display', 'what are', 'how many'. Tables: bucket (bucket_name, created_at, versioning_enabled, worm_enabled, lifecycle_enabled), bucket_stats (bucket_id, size_gb, object_count, timestamp).",
      "category": "read_analytics",
      "mode": "read",
      "parameters": {
        "type": "object",
        "properties": {
          "sql": {
            "type": "string",
            "description": "SQL query to execute. Common queries: 'SELECT * FROM bucket' for buckets, 'SELECT b.bucket_name, bs.size_gb, bs.object_count FROM bucket b JOIN bucket_stats bs ON b.bucket_id = bs.bucket_id' for stats"
          }
        },
        "required": ["sql"]
      },
      "examples": [
        "List all buckets → SELECT bucket_name, created_at FROM bucket",
        "Show bucket sizes → SELECT b.bucket_name, bs.size_gb FROM bucket b JOIN bucket_stats bs...",
        "Which buckets have WORM? → SELECT bucket_name FROM bucket WHERE worm_enabled = 1",
        "Storage growth this week → SELECT bucket_name, size_gb, timestamp FROM bucket_stats WHERE timestamp >= datetime('now', '-7 days')"
      ]
    },
    {
      "name": "get_table_schema",
      "description": "Get the schema (columns and types) for a database table. Use before writing complex SQL queries.",
      "category": "read_analytics",
      "mode": "read",
      "parameters": {
        "type": "object",
        "properties": {
          "table_name": {
            "type": "string",
            "description": "Name of the table: 'bucket', 'bucket_stats', etc."
          }
        },
        "required": ["table_name"]
      },
      "examples": [
        "Describe the bucket table",
        "What columns are in bucket_stats?"
      ]
    },
    {
      "name": "list_tables",
      "description": "List all tables available in the analytics database for SQL queries.",
      "category": "read_analytics",
      "mode": "read",
      "parameters": {
        "type": "object",
        "properties": {}
      },
      "examples": [
        "What tables are available for analytics?"
      ]
    },
    {
      "name": "get_database_summary",
      "description": "Get complete database overview with all tables, columns, and row counts.",
      "category": "read_analytics",
      "mode": "read",
      "parameters": {
        "type": "object",
        "properties": {}
      },
      "examples": [
        "Give me a database overview"
      ]
    },
    {
      "name": "create_bucket",
      "description": "ACTION: Create a new S3 bucket via API. Only use for CREATE requests, NOT for listing.",
      "category": "write_action",
      "mode": "write",
      "parameters": {
        "type": "object",
        "properties": {
          "bucket_name": {
            "type": "string",
            "description": "Name of the bucket to create (lowercase, 3-63 chars)"
          }
        }
      },
      "examples": [
        "Create a bucket called 'my-data'",
        "Make a new bucket for backups"
      ]
    },
    {
      "name": "put_object",
      "description": "ACTION: Upload an object to a bucket via S3 API. Only use for upload/write requests.",
      "category": "write_action",
      "mode": "write",
      "parameters": {
        "type": "object",
        "properties": {
          "bucket_name": {
            "type": "string",
            "description": "Target bucket name"
          },
          "key": {
            "type": "string",
            "description": "Object key (filename/path)"
          },
          "content": {
            "type": "string",
            "description": "Text content to upload"
          }
        },
        "required": ["bucket_name", "key", "content"]
      },
      "examples": [
        "Upload test.txt to my-bucket",
        "Create a config file in settings bucket"
      ]
    },
    {
      "name": "delete_object",
      "description": "ACTION: Delete an object from a bucket via S3 API. Confirm with user first!",
      "category": "write_action",
      "mode": "write",
      "parameters": {
        "type": "object",
        "properties": {
          "bucket_name": {
            "type": "string",
            "description": "Bucket containing the object"
          },
          "key": {
            "type": "string",
            "description": "Object key to delete"
          }
        },
        "required": ["bucket_name", "key"]
      },
      "examples": [
        "Delete old-file.txt from bucket"
      ]
    },
    {
      "name": "list_objects",
      "description": "List objects currently in a specific bucket via S3 API. Use when user asks for LIVE/CURRENT objects in a specific bucket.",
      "category": "read_realtime",
      "mode": "read",
      "parameters": {
        "type": "object",
        "properties": {
          "bucket_name": {
            "type": "string",
            "description": "Bucket name to list objects from"
          },
          "prefix": {
            "type": "string",
            "description": "Optional prefix filter"
          },
          "max_keys": {
            "type": "integer",
            "description": "Max objects to return (default: 1000)"
          }
        },
        "required": ["bucket_name"]
      },
      "examples": [
        "List objects in bucket 'my-data'",
        "Show files in logs bucket"
      ]
    },
    {
      "name": "get_bucket_info",
      "description": "Get live bucket info (object count, size) via S3 API for a specific bucket.",
      "category": "read_realtime",
      "mode": "read",
      "parameters": {
        "type": "object",
        "properties": {
          "bucket_name": {
            "type": "string",
            "description": "Bucket name"
          }
        },
        "required": ["bucket_name"]
      },
      "examples": [
        "Get info about my-data bucket"
      ]
    },
    {
      "name": "get_object_stores",
      "description": "Get Object Store configurations from Prism Central (name, domain, capacity, status).",
      "category": "read_realtime",
      "mode": "read",
      "parameters": {
        "type": "object",
        "properties": {}
      },
      "examples": [
        "List object stores",
        "Show object store configurations"
      ]
    },
    {
      "name": "fetch_object_store_stats_v4",
      "description": "Fetch real-time IOPS, throughput, capacity stats from Prism Central v4 API. Use for live performance metrics.",
      "category": "read_realtime",
      "mode": "read",
      "parameters": {
        "type": "object",
        "properties": {
          "object_store_ext_id": {
            "type": "string",
            "description": "Object store UUID (get from get_object_stores)"
          },
          "start_time": {
            "type": "string",
            "description": "Start time ISO 8601 (e.g., '2024-01-01T00:00:00Z')"
          },
          "end_time": {
            "type": "string",
            "description": "End time ISO 8601"
          },
          "select_stats": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Stats: totalObjectCount, totalBucketCount, totalCapacityBytes, usedCapacityBytes, readIops, writeIops"
          }
        },
        "required": ["object_store_ext_id", "start_time", "end_time"]
      },
      "examples": [
        "Get IOPS for the last hour",
        "Show throughput metrics today"
      ]
    }
  ],
  "categories": {
    "read_analytics": {
      "name": "Analytics (SQL Database)",
      "description": "PRIMARY for all read/list/stats operations - query the SQL analytics database",
      "icon": "database",
      "mode": "read"
    },
    "read_realtime": {
      "name": "Real-time Queries (API)",
      "description": "Live object listing and Prism Central metrics",
      "icon": "refresh",
      "mode": "read"
    },
    "write_action": {
      "name": "Actions (API)",
      "description": "Create, upload, delete operations via S3/Prism API",
      "icon": "edit",
      "mode": "write"
    }
  },
  "mode_rules": {
    "read": {
      "primary_tool": "execute_sql",
      "description": "Use SQL database for all list/show/get/stats requests",
      "keywords": ["list", "show", "get", "display", "what", "which", "how many", "stats", "analytics", "trend", "growth"]
    },
    "write": {
      "tools": ["create_bucket", "put_object", "delete_object"],
      "description": "Use API for create/upload/delete/modify operations",
      "keywords": ["create", "make", "upload", "put", "delete", "remove", "modify", "update", "configure"]
    }
  }
}
